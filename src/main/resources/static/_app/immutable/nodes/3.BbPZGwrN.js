import{t as u,a as b,b as et}from"../chunks/DyJux5AM.js";import"../chunks/TPdjuWMd.js";import{p as at,a as rt,c as d,s as n,r as c,g as r,m as st,t as P,b as ot,f as D,d as k}from"../chunks/CZkFhCqJ.js";import{e as l,s as J}from"../chunks/Df5S150I.js";import{s as N,a as nt,b as ct,i as A}from"../chunks/BW_ZcXfj.js";import{e as it,i as dt}from"../chunks/D27sE8o2.js";import{b as H,r as I}from"../chunks/Bf81OFe9.js";import{i as lt}from"../chunks/BaMhqmz6.js";import{o as pt}from"../chunks/D9-DIcJb.js";import{w as B}from"../chunks/DcV-m7ys.js";var bt=u('<input type="text" class="border px-2 py-1 rounded">'),ut=u('<button class="bg-gray-200 px-3 py-1 text-white rounded hover:bg-gray-400 mr-2">저장</button> <button class="bg-gray-200 px-3 py-1 text-white rounded hover:bg-gray-400">취소</button>',1),ht=u('<button class="bg-gray-200 px-3 py-1 text-white rounded hover:bg-gray-400 mr-2">수정</button> <button class="bg-gray-200 px-3 py-1 text-white rounded hover:bg-gray-400">삭제</button>',1),mt=u('<tr class="border-b"><td class="border px-4 py-3 text-center"> </td><td class="border px-4 py-3 text-center"><!></td><td class="border px-4 py-3 text-center"><!></td></tr>'),yt=u('<main class="flex flex-col items-center justify-center min-h-screen bg-gray-50 p-8 gap-8"><button class="absolute top-4 left-4 px-4 py-2 bg-gray-200 text-white rounded hover:bg-gray-400 transition">← 뒤로가기</button> <h1 class="text-3xl font-bold mb-6">브랜드 관리</h1> <div class="mb-6 flex gap-4"><input type="text" placeholder="새 브랜드 이름" class="border px-4 py-2 rounded"> <button class="bg-gray-200 px-4 py-2 text-white rounded hover:bg-gray-400">추가</button></div> <table class="w-full max-w-2xl bg-white shadow-md rounded-lg"><thead class="bg-gray-200"><tr><th class="px-4 py-3 border">ID</th><th class="px-4 py-3 border">브랜드명</th><th class="px-4 py-3 border">액션</th></tr></thead><tbody></tbody></table></main>');function $t(K,L){at(L,!1);const[S,q]=nt(),j=()=>N(v,"$newBrand",S),z=()=>N($,"$brands",S),$=B([]),v=B(""),h=B(null);let o=st({id:null,name:""});const m=async()=>{try{const t=await(await fetch("http://localhost:8080/api/v1/brands")).json();if(t.isSucceeded&&$.set(t.result),!t.isSucceeded){alert(t.errorMessage);return}}catch{h.set("브랜드 정보를 불러오는데 실패했습니다.")}},M=async()=>{try{const t=await(await fetch("http://localhost:8080/api/v1/brands",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:j()})})).json();if(!t.isSucceeded){alert(t.errorMessage);return}v.set(""),m()}catch{h.set("브랜드 추가에 실패했습니다.")}},F=async()=>{try{const t=await(await fetch(`http://localhost:8080/api/v1/brands/${r(o).id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r(o).name})})).json();if(!t.isSucceeded){alert(t.errorMessage);return}k(o,{id:null,name:""}),m()}catch{h.set("브랜드 수정에 실패했습니다.")}},G=async e=>{try{const t=await fetch(`http://localhost:8080/api/v1/brands/${e}`,{method:"DELETE"});m();const p=await t.json();if(!p.isSucceeded){alert(p.errorMessage);return}}catch{h.set("브랜드 삭제에 실패했습니다.")}};function Q(e){e.key==="Enter"&&M()}pt(()=>m()),lt();var g=yt(),T=d(g),f=n(T,4),y=d(f);I(y);var R=n(y,2);c(f);var E=n(f,2),C=n(d(E));it(C,5,z,dt,(e,t)=>{var p=mt(),x=d(p),U=d(x,!0);c(x);var _=n(x),V=d(_);{var W=a=>{var s=bt();I(s),H(s,()=>r(o).name,i=>ot(o,r(o).name=i)),b(a,s)},X=a=>{var s=et();P(()=>J(s,r(t).name)),b(a,s)};A(V,a=>{r(o).id===r(t).id?a(W):a(X,!1)})}c(_);var O=n(_),Y=d(O);{var Z=a=>{var s=ut(),i=D(s),w=n(i,2);l("click",i,F),l("click",w,()=>k(o,{id:null,name:""})),b(a,s)},tt=a=>{var s=ht(),i=D(s),w=n(i,2);l("click",i,()=>k(o,{id:r(t).id,name:r(t).name})),l("click",w,()=>G(r(t).id)),b(a,s)};A(Y,a=>{r(o).id===r(t).id?a(Z):a(tt,!1)})}c(O),c(p),P(()=>J(U,r(t).id)),b(e,p)}),c(C),c(E),c(g),l("click",T,()=>history.back()),H(y,j,e=>ct(v,e)),l("keydown",y,Q),l("click",R,M),b(K,g),rt(),q()}export{$t as component};
